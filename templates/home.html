{% extends "base.html" %}

{% block log_sin %}Log In{% endblock %}
{% block log_sin_url %}/user/login{% endblock %}

{% block content %}


{% if session['logged_in'] %}

<div class="hola">
    <svg width="500" height="200" viewBox="0 0 1208 629" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="1208" height="629" fill=""/>
        <path d="M0 0H1208V629H0V0Z" fill="black"/>
        <path d="M764.466 453.396C764.537 453.283 764.613 453.173 764.695 453.067C764.898 452.604 765.153 452.166 765.456 451.758L790.618 417.645L811.35 389.551H846.713L844.213 392.933L839.763 398.97L825.972 417.655L796.419 457.709L823.811 511.03C824.932 513.2 823.021 516.321 819.571 517.988L806.36 524.365C805.048 525.013 803.601 525.365 802.129 525.392C800.269 525.392 798.719 524.723 798.069 523.454L764.016 457.166C763.747 456.554 763.648 455.884 763.727 455.223C763.806 454.562 764.06 453.933 764.466 453.396Z" fill="#0E7A0D"/>
        <path d="M812.052 451.353L776.428 438.527C774.813 437.943 773.503 436.763 772.786 435.244C772.068 433.726 772 431.994 772.599 430.427L783.048 403.174C783.651 401.61 784.869 400.34 786.436 399.645C788.002 398.949 789.79 398.884 791.406 399.463L827.03 412.289C828.645 412.873 829.955 414.054 830.673 415.572C831.391 417.09 831.458 418.823 830.86 420.389L820.41 447.642C820.113 448.417 819.661 449.129 819.08 449.735C818.499 450.341 817.801 450.83 817.025 451.175C816.248 451.52 815.41 451.713 814.557 451.743C813.704 451.774 812.853 451.641 812.052 451.353H812.052Z" fill="#CECED0"/>
        <path d="M781.76 436.203C781.52 436.203 781.281 436.161 781.056 436.079H781.056C780.56 435.896 780.159 435.531 779.941 435.062C779.723 434.594 779.705 434.061 779.892 433.58L792.972 400.038C793.159 399.557 793.536 399.168 794.02 398.956C794.503 398.745 795.054 398.728 795.55 398.91C796.046 399.091 796.448 399.457 796.666 399.925C796.884 400.394 796.902 400.927 796.714 401.408L783.634 434.95C783.49 435.319 783.233 435.636 782.899 435.86C782.564 436.084 782.167 436.203 781.76 436.203V436.203Z" fill="black"/>
        <path d="M839.242 520.401V399.251C839.239 399.139 839.247 399.026 839.264 398.914C839.325 397.509 839.808 396.151 840.654 395.008C841.501 393.866 842.674 392.988 844.028 392.483C844.892 392.15 845.814 391.981 846.743 391.983H861.505C863.493 391.985 865.4 392.751 866.806 394.114C868.212 395.477 869.003 397.324 869.006 399.251V520.401C869.003 522.328 868.212 524.175 866.806 525.538C865.4 526.901 863.493 527.667 861.505 527.669H846.743C844.755 527.667 842.848 526.901 841.442 525.538C840.036 524.175 839.245 522.328 839.242 520.401Z" fill="#0E7A0D"/>
        <path d="M831.232 444.79V415.717C831.234 414.047 831.919 412.446 833.138 411.265C834.357 410.084 836.009 409.419 837.733 409.417H875.736C877.46 409.419 879.112 410.084 880.331 411.265C881.549 412.446 882.235 414.047 882.237 415.717V444.79C882.235 446.46 881.549 448.062 880.331 449.242C879.112 450.423 877.46 451.088 875.736 451.09H837.733C836.009 451.088 834.357 450.423 833.138 449.242C831.919 448.062 831.234 446.46 831.232 444.79Z" fill="#CECED0"/>
        <path d="M860.31 448.021C859.779 448.021 859.271 447.816 858.896 447.453C858.521 447.09 858.31 446.597 858.309 446.083V410.226C858.309 409.712 858.52 409.219 858.895 408.855C859.27 408.492 859.779 408.287 860.31 408.287C860.84 408.287 861.349 408.492 861.724 408.855C862.099 409.219 862.31 409.712 862.31 410.226V446.083C862.309 446.597 862.098 447.09 861.723 447.453C861.348 447.816 860.84 448.021 860.31 448.021V448.021Z" fill="black"/>
        <path d="M737.507 287.226L714.935 207.325C714.574 206.033 714.752 204.61 715.43 203.369C716.108 202.128 717.231 201.169 718.553 200.702L728.378 197.252C729.702 196.791 731.116 196.861 732.309 197.446C733.502 198.031 734.378 199.083 734.745 200.373L757.318 280.277C757.432 280.677 757.492 281.095 757.497 281.519C757.526 282.667 757.167 283.82 756.479 284.795C755.79 285.77 754.811 286.51 753.699 286.898L743.874 290.348C743.218 290.579 742.533 290.681 741.857 290.649C741.182 290.617 740.53 290.45 739.938 290.159C739.472 289.927 739.05 289.622 738.684 289.256C738.127 288.696 737.724 288 737.507 287.226Z" fill="#0E7A0D"/>
        <path d="M794.095 310.243L740.931 289.904C739.156 289.039 737.807 287.527 737.18 285.701C736.552 283.874 736.698 281.88 737.584 280.157L749.707 255.944C750.603 254.226 752.163 252.919 754.048 252.309C754.996 252.006 755.997 251.889 756.992 251.965C757.987 252.041 758.957 252.309 759.844 252.752L807.853 280.954C808.039 281.044 808.212 281.16 808.364 281.298C809.588 282.366 810.197 284.928 810.686 286.984L810.764 287.303C810.897 287.855 811.013 288.331 811.13 288.665L811.17 288.793C811.212 288.928 811.256 289.069 811.285 289.198C811.715 290.876 811.51 292.649 810.707 294.193L804.087 306.976C803.455 308.18 802.492 309.192 801.305 309.901C800.119 310.61 798.753 310.988 797.359 310.994C796.225 310.996 795.107 310.739 794.095 310.243V310.243Z" fill="#CECED0"/>
        <path d="M833.31 243.889C862.871 243.889 886.834 220.668 886.834 192.023C886.834 163.378 862.871 140.156 833.31 140.156C803.749 140.156 779.786 163.378 779.786 192.023C779.786 220.668 803.749 243.889 833.31 243.889Z" fill="#0E7A0D"/>
        <path d="M836.435 219.968L836.49 218.03C832.769 217.93 829.489 217.703 827.024 215.958C826.325 215.435 825.75 214.773 825.339 214.016C824.929 213.258 824.691 212.424 824.642 211.57C824.599 211.048 824.68 210.523 824.88 210.037C825.08 209.55 825.393 209.115 825.795 208.765C827.431 207.426 830.064 207.859 831.984 208.712L833.639 209.447L830.465 186.973L828.483 187.236L831.183 206.353C828.575 205.61 826.159 205.93 824.504 207.285C823.869 207.822 823.37 208.495 823.047 209.25C822.724 210.005 822.586 210.822 822.643 211.638C822.702 212.786 823.019 213.907 823.571 214.924C824.124 215.941 824.9 216.828 825.844 217.524C829.011 219.767 833.127 219.878 836.435 219.968Z" fill="#2F2E41"/>
        <path d="M818.683 188.885H807.911V190.823H818.683V188.885Z" fill="#2F2E41"/>
        <path d="M852.686 188.885H841.914V190.823H852.686V188.885Z" fill="#2F2E41"/>
        <path d="M784.518 418.115C780.984 417.917 778.227 412.286 778.227 405.224V314.444C778.226 310.023 778.799 305.619 779.933 301.337L779.933 301.336C780.346 299.796 780.835 298.266 781.386 296.789C784.744 287.697 790.638 279.686 798.413 273.647C799.291 272.952 800.209 272.28 801.141 271.649C805.67 268.552 810.666 266.154 815.953 264.54C815.807 263.902 815.732 263.25 815.731 262.596C815.733 260.155 816.735 257.815 818.516 256.089C820.298 254.363 822.713 253.392 825.231 253.389H839.233C841.752 253.392 844.167 254.363 845.948 256.089C847.729 257.815 848.731 260.155 848.734 262.596C848.732 263.249 848.658 263.899 848.512 264.537C859.455 267.894 869.011 274.541 875.794 283.515C882.576 292.488 886.234 303.321 886.237 314.444V405.223C886.237 412.466 883.382 418.14 879.737 418.14H784.728C784.657 418.141 784.587 418.133 784.518 418.115V418.115Z" fill="#CECED0"/>
        <path d="M846.367 426.402C845.746 425.344 845.408 424.153 845.384 422.936L843.28 303.741C843.262 302.786 843.439 301.838 843.8 300.95C844.161 300.061 844.699 299.251 845.384 298.564L845.386 298.563C846.07 297.876 846.887 297.326 847.79 296.946C848.693 296.565 849.665 296.36 850.65 296.344L865.411 296.104C867.271 296.071 869.076 296.71 870.477 297.896C871.878 299.082 872.773 300.73 872.99 302.52C873.022 302.759 873.038 302.999 873.038 303.239L875.15 422.443C875.179 424.369 874.418 426.228 873.036 427.613C871.653 428.998 869.761 429.796 867.773 429.832L853.016 430.078C851.67 430.098 850.343 429.767 849.174 429.12C848.004 428.473 847.035 427.535 846.367 426.402V426.402Z" fill="#0E7A0D"/>
        <path d="M840.163 344.548C839.604 343.596 839.275 342.533 839.199 341.439L839.829 286.216C839.676 284.294 840.316 282.393 841.608 280.928C842.9 279.463 844.739 278.554 846.721 278.401L861.436 277.284C863.227 277.152 865.008 277.642 866.459 278.668C866.61 278.779 866.761 278.914 866.908 279.011C867.276 279.307 867.659 279.585 868.057 279.844L868.376 280.064C870.491 281.515 872.889 283.159 873.005 284.762L881.857 338.64C881.99 340.179 881.605 341.717 880.761 343.026C880.562 343.348 880.336 343.652 880.084 343.937C879.863 344.189 879.622 344.423 879.362 344.639C878.142 345.703 876.591 346.345 874.954 346.465L847.26 348.196C845.842 348.302 844.423 348.015 843.166 347.369C841.91 346.723 840.868 345.745 840.163 344.548V344.548Z" fill="#CECED0"/>
        <path d="M788.303 405.38C787.772 405.379 787.264 405.175 786.889 404.812C786.514 404.448 786.303 403.956 786.303 403.442V309.437C786.303 308.923 786.513 308.43 786.888 308.067C787.264 307.703 787.772 307.499 788.303 307.499C788.833 307.499 789.342 307.703 789.717 308.067C790.092 308.43 790.303 308.923 790.303 309.437V403.442C790.302 403.956 790.091 404.448 789.717 404.812C789.342 405.175 788.833 405.379 788.303 405.38V405.38Z" fill="black"/>
        <path d="M881.853 179.702L788.87 146.74C788.377 146.565 787.924 146.297 787.537 145.953C787.151 145.608 786.838 145.193 786.617 144.732C786.395 144.27 786.27 143.77 786.248 143.262C786.226 142.753 786.307 142.245 786.488 141.767L786.803 140.326C794.064 121.091 818.133 108.985 837.984 116.022L866.596 126.165C886.446 133.202 895.074 155.979 887.812 175.214L886.984 177.393C886.62 178.359 885.874 179.144 884.912 179.577C883.95 180.01 882.849 180.055 881.853 179.702Z" fill="#CECED0"/>
        <path d="M886.862 181.531C757.262 186.165 745.938 170.385 785.426 145.572L793.803 130.635L889.812 164.554L886.862 181.531Z" fill="#CECED0"/>
        <path d="M861.45 123.8C862.165 121.493 859.1 118.562 854.604 117.252C850.108 115.942 845.883 116.75 845.168 119.057C844.452 121.364 847.517 124.295 852.013 125.605C856.509 126.914 860.734 126.106 861.45 123.8Z" fill="#CECED0"/>
        <path d="M922.37 527.973H739.353C739.088 527.973 738.834 527.871 738.646 527.69C738.459 527.508 738.353 527.261 738.353 527.004C738.353 526.747 738.459 526.501 738.646 526.319C738.834 526.137 739.088 526.035 739.353 526.035H922.37C922.636 526.035 922.89 526.137 923.078 526.319C923.265 526.501 923.371 526.747 923.371 527.004C923.371 527.261 923.265 527.508 923.078 527.69C922.89 527.871 922.636 527.973 922.37 527.973Z" fill="#CECED0"/>
        <path d="M300.7 352.3C296.7 352.3 294.7 351.2 294.7 349V250C294.7 247.8 296.7 246.7 300.7 246.7H301.9C305.9 246.7 307.9 247.8 307.9 250V292.45H362.2V250C362.2 247.8 364.2 246.7 368.2 246.7H369.4C373.4 246.7 375.4 247.8 375.4 250V349C375.4 351.2 373.4 352.3 369.4 352.3H368.2C364.2 352.3 362.2 351.2 362.2 349V303.85H307.9V349C307.9 351.2 305.9 352.3 301.9 352.3H300.7ZM433.06 352.9C421.76 352.9 413.11 349.5 407.11 342.7C401.21 335.9 398.26 326.05 398.26 313.15C398.26 300.15 401.26 290.15 407.26 283.15C413.26 276.15 421.86 272.65 433.06 272.65C444.06 272.65 452.46 276.15 458.26 283.15C464.16 290.05 467.11 300.05 467.11 313.15C467.11 326.15 464.21 336.05 458.41 342.85C452.71 349.55 444.26 352.9 433.06 352.9ZM432.61 342.1C440.01 342.1 445.41 339.75 448.81 335.05C452.31 330.25 454.06 322.85 454.06 312.85C454.06 302.85 452.31 295.45 448.81 290.65C445.41 285.85 440.01 283.45 432.61 283.45C425.31 283.45 419.96 285.85 416.56 290.65C413.16 295.35 411.46 302.75 411.46 312.85C411.46 322.85 413.16 330.25 416.56 335.05C419.96 339.75 425.31 342.1 432.61 342.1ZM507.06 352.9C505.16 352.9 503.11 352.6 500.91 352C498.71 351.5 496.61 350.55 494.61 349.15C492.61 347.65 490.96 345.55 489.66 342.85C488.36 340.05 487.71 336.5 487.71 332.2V242.5C487.71 240.3 489.71 239.2 493.71 239.2H494.31C498.31 239.2 500.31 240.3 500.31 242.5V331C500.31 335.5 501.11 338.5 502.71 340C504.31 341.4 506.21 342.1 508.41 342.1C510.61 342.1 512.06 342 512.76 341.8C513.46 341.5 514.16 341.35 514.86 341.35C515.56 341.35 516.11 341.85 516.51 342.85C517.01 343.85 517.36 344.95 517.56 346.15C517.86 347.25 518.01 348 518.01 348.4C518.01 349.7 517.36 350.7 516.06 351.4C514.86 352 513.41 352.4 511.71 352.6C510.01 352.8 508.46 352.9 507.06 352.9ZM552.941 352.9C545.641 352.9 539.541 351.1 534.641 347.5C529.741 343.8 527.291 338.1 527.291 330.4C527.291 324.1 528.791 319.15 531.791 315.55C534.791 311.85 538.741 309.15 543.641 307.45C548.541 305.65 553.891 304.5 559.691 304C565.591 303.5 571.391 303.2 577.091 303.1V296.05C577.091 292.65 575.891 289.7 573.491 287.2C571.091 284.7 566.791 283.45 560.591 283.45C556.091 283.45 552.141 284 548.741 285.1C545.441 286.1 542.791 287.15 540.791 288.25C538.891 289.25 537.691 289.75 537.191 289.75C536.491 289.75 535.741 289.25 534.941 288.25C534.141 287.25 533.441 286.15 532.841 284.95C532.241 283.65 531.941 282.75 531.941 282.25C531.941 280.95 533.241 279.55 535.841 278.05C538.441 276.55 541.891 275.3 546.191 274.3C550.491 273.2 555.141 272.65 560.141 272.65C566.341 272.65 571.641 273.6 576.041 275.5C580.441 277.3 583.791 279.95 586.091 283.45C588.491 286.95 589.691 291.2 589.691 296.2V329.8C589.691 333.9 589.841 337.3 590.141 340C590.441 342.7 590.741 344.75 591.041 346.15C591.341 347.55 591.491 348.4 591.491 348.7C591.491 349.4 591.141 350 590.441 350.5C589.841 350.9 589.091 351.25 588.191 351.55C587.291 351.75 586.391 351.9 585.491 352C584.591 352.1 583.891 352.15 583.391 352.15C582.191 352.15 581.241 351.6 580.541 350.5C579.941 349.3 579.441 347.9 579.041 346.3C578.741 344.6 578.441 343.05 578.141 341.65C576.241 343.75 574.041 345.65 571.541 347.35C569.041 349.05 566.241 350.4 563.141 351.4C560.141 352.4 556.741 352.9 552.941 352.9ZM553.541 341.95C559.041 341.95 563.591 340.9 567.191 338.8C570.791 336.7 574.091 334.3 577.091 331.6V313.9C573.191 313.9 569.141 314.05 564.941 314.35C560.741 314.55 556.791 315.1 553.091 316C549.391 316.9 546.391 318.45 544.091 320.65C541.891 322.75 540.791 325.75 540.791 329.65C540.791 333.65 541.841 336.7 543.941 338.8C546.141 340.9 549.341 341.95 553.541 341.95ZM622.83 321.7C621.23 321.7 620.08 321.4 619.38 320.8C618.68 320.2 618.33 319.4 618.33 318.4V250C618.33 247.8 620.33 246.7 624.33 246.7H627.33C631.23 246.7 633.18 247.8 633.18 250C632.48 261.4 631.83 272.8 631.23 284.2C630.63 295.6 629.93 307 629.13 318.4C629.03 319.4 628.63 320.2 627.93 320.8C627.23 321.4 626.08 321.7 624.48 321.7H622.83ZM622.53 352.3C618.53 352.3 616.53 351.2 616.53 349V339.1C616.53 336.9 618.53 335.8 622.53 335.8H625.08C629.08 335.8 631.08 336.9 631.08 339.1V349C631.08 351.2 629.08 352.3 625.08 352.3H622.53Z" fill="white"/>
        </svg>
        
</div>

<div class="pr-add">
    <div>
        <form class="row g-3" name="product_form">
            <div class="col-xs-5">
                <label for="text" class="t-g"><b> Product Url</b></label>
                <input type="text" class="form-control" name="p_url" id="p_url" placeholder="https://">
            </div>
            <div class="col-auto">
                <label for="text" class="t-g"><b>Base Price</b></label>
                <input type="text" class="form-control" name="base_price" id="b_price" placeholder="Price">
            </div>
            <div class="col-auto">
                <br>
                <button type="submit" class="btn btn-success mb-3" style="background-color: #0e7a0d;">Add
                    Product</button>
                </div>
        </form>
    </div>
    

</div>
<div class="alert-not">

</div>
<div class="prod-list-box">

    <table class="table">
        {% if payload['products'] %}
        <thead>
            <tr>
                <th scope="col" class="t-g"><b>Product</b></th>
                <th scope="col" class="t-g"><b>Your Price</b></th>
                <th scope="col" class="t-g"><b>Status</b></th>
            </tr>
        </thead>
        {% else %}
        <thead class="hidden" id="t_h">
            <tr>
                <th scope="col" class="t-g"><b>Product</b></th>
                <th scope="col" class="t-g"><b>Your Price</b></th>
                <th scope="col" class="t-g"><b>Status</b></th>
            </tr>
        </thead>
        {% endif %}
        <tbody id="t-body">
            
            {% for product in payload['products'] %}
           
            <tr id="tr_{{ product['_id'] }}">
                <td id="p_url_{{ product['_id'] }}"><a style="text-decoration: none; color: #c0c0c0;"
                        href="{{ product['url'] }}" target="_blank">
                        
                        {% if product['title']|length > 100 %}
                        {{ product['title']|truncate(80,True,'...')}}
                        {% else %}
                        {{ product['title'] }}
                        {% endif %}
                    </a></td>
                        <td id="p_bp_{{ product['_id'] }}">
                            {{ product['base_price'] }}
                        </td>
                        {% if product['done'] %}
                        <td class="t-g">Done</td>
                        {% else %}
                        <td class="t-r">Pending</td>
                        {% endif %}
                <td>

                    <li class="nav-item dropdown" style="text-decoration: none; list-style: none;">
                        <i class="fa fa-ellipsis-v nav-link" role="button" data-bs-toggle="dropdown" aria-hidden="true"
                            style="color: #c0c0c0;" id="dot_id_{{ product['_id'] }}"></i>
                            
                        <div id="upd_btn_id_{{ product['_id'] }}" class="d-none">
                            <button type="submit" class="btn btn-success"
                                style="background-color: #0e7a0d;" id="u_p{{ product['_id'] }}" onclick="update_product(this.id)">Update</button> 
                                <i class="fa fa-1x fa-times" aria-hidden="true" id="cross_btn_{{ product['_id'] }}" style='cursor:pointer' onclick="close_edit(this.id)"></i>
                        </div>

                        <ul style="background-color: black;" class="dropdown-menu" aria-labelledby="navbarDropdown">
                            {% if product['done'] %}
                            <li><a class="dropdown-item pr_id" style="color: #0e7a0d; font-weight: bold;"
                                id="pr_{{ product['_id'] }}" onclick="del_product(this.id)">Remove</a></li>
                                
                            {% else %}
                                <li> <a class="dropdown-item pe_id" style="color: #0e7a0d; font-weight: bold;"
                                    id="pe_{{ product['_id'] }}" onclick="edit_product(this.id)"> Edit</a>
                                </li>
                                
                                <li><a class="dropdown-item pr_id" style="color: #0e7a0d; font-weight: bold;"
                                    id="pr_{{ product['_id'] }}" onclick="del_product(this.id)">Remove</a></li>
                            {% endif %}
                        </ul>
                    </li>   

                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


{% else %}
<div class="card-wrapper">


    <div class="user_card" style="background-color: black;">

        <h1 class="center t-g">Create an Account</h1>

        <form name="signup_form" id="form-area">


            <label for="name" class="t-g"><b>Name</b></label>
            <input type="text" name="name" class="field" required>

            <label for="email" class="t-g"><b>Email</b></label>
            <input type="email" name="email" id="v_em" class="field" required>
            <div style=" margin-top: -20px; cursor: pointer;" id="v_e">
                <p style="font-size: 15px; text-decoration-line: underline;" class="t-g">Verify Email</p>
            </div>
            <label for="password" class="t-g"><b>Password</b></label>
            <input type="password" name="password" id="pass_v" class="field" required>

            <input type="checkbox" onclick="show_pass(this)"><label for="" class="mx-2">show password</label>

            <p class="error error--hidden"></p>

            <input type="submit" value="Sign Up" class="btn btn-success" style="background-color: #0e7a0d;">

        </form>

    </div>

</div>
{% endif %}


{% endblock %}